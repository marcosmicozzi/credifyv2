---
alwaysApply: true
---
# Credify Project Overview

CredifyV2 is a full-stack TypeScript project composed of a Vite-powered React SPA and an Express API. It replaces the legacy Streamlit application while preserving the Supabase data model.

## Entry points and key files

- Frontend SPA entry: `frontend/src/main.tsx` bootstraps the React router and providers.
- Route pages live under `frontend/src/pages/` (e.g., `dashboard`, `analytics`, `auth/login`).
- API server entry: `backend/src/server.ts` wires Express middleware and route registration.
- REST endpoints are defined under `backend/src/routes/` with supporting logic in `backend/src/services/`.
- Shared Supabase configuration is in `frontend/src/lib/supabaseClient.ts` and `backend/src/config/supabase.ts`.
- Repository architecture reference: `docs/architecture.md`.

## Data model (high-level)

- Tables expected in Supabase: `users`, `projects`, `user_projects`, `metrics`, `latest_metrics`, `user_metrics`, `roles`.
- Users are identified by `u_email` and `u_id`. Projects are keyed by YouTube `p_id`.

## Frontend navigation

- React Router controls navigation; see `frontend/src/App.tsx` for layout composition and `frontend/src/components/layout/RootLayout.tsx` for shell scaffolding.
- Authentication state is managed by `frontend/src/providers/AuthProvider.tsx`, wrapping protected pages via `frontend/src/components/auth/ProtectedRoute.tsx`.

## Backend responsibilities

- Express routes expose auth, metrics, and health endpoints in `backend/src/routes/`.
- Middleware for error handling and 404s lives in `backend/src/middleware/`.
- Configuration and environment loading follow `backend/src/config/env.ts`; keep secrets in `.env` files mirrored by `backend/env.example`.

## Implementation guidance

- Consolidate shared utilities in `frontend/src/lib/` and `backend/src/services/` to avoid duplication.
- Prefer typed contracts using `zod` schemas or TypeScript interfaces when exchanging data between frontend and backend.
- Align Supabase access patterns with the rules in `.cursor/rules/supabase.mdc` and enforce RLS-friendly queries.

